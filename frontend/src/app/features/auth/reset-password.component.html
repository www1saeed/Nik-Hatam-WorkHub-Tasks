<section class="auth">
  <div class="auth__card">
    <div class="auth__title">{{ 'auth.password_reset.title' | transloco }}</div>
    <p class="auth__subtitle">{{ 'auth.password_reset.subtitle' | transloco }}</p>
    <div class="auth__notice">
      {{ 'auth.password_reset.info_reset' | transloco }}
    </div>

    <form class="auth__form" [formGroup]="form" (ngSubmit)="submit()">
      <label class="auth__field">
        <span>{{ 'auth.password_reset.login' | transloco }}</span>
        <input
          type="text"
          class="auth__input"
          formControlName="login"
          autocomplete="username"
          (input)="onFieldInput('login')"
        />
        @if (getFieldErrorKey('login')) {
          <small class="auth__hint auth__hint--error">{{ getFieldErrorKey('login') | transloco }}</small>
        }
      </label>

      <input type="hidden" formControlName="token" />

      <label class="auth__field">
        <span>{{ 'auth.password_reset.password' | transloco }}</span>
        <input
          type="password"
          class="auth__input"
          formControlName="password"
          autocomplete="new-password"
          (input)="onFieldInput('password')"
        />
        @if (getFieldErrorKey('password')) {
          <small class="auth__hint auth__hint--error">{{ getFieldErrorKey('password') | transloco }}</small>
        }
      </label>

      <label class="auth__field">
        <span>{{ 'auth.password_reset.confirm_password' | transloco }}</span>
        <input
          type="password"
          class="auth__input"
          formControlName="password_confirmation"
          autocomplete="new-password"
          (input)="onFieldInput('password_confirmation')"
        />
        @if (getFieldErrorKey('password_confirmation')) {
          <small class="auth__hint auth__hint--error">
            {{ getFieldErrorKey('password_confirmation') | transloco }}
          </small>
        }
      </label>

      @if (errorMessage) {
        <div class="auth__error">
          {{ errorMessage | transloco }}
        </div>
      }

      @if (successMessage) {
        <div class="auth__success">
          {{ successMessage | transloco }}
        </div>
      }

      <button class="auth__submit" type="submit" [disabled]="isSubmitting">
        {{ 'auth.password_reset.submit' | transloco }}
      </button>
    </form>

    <div class="auth__footer">
      <a routerLink="/login">{{ 'auth.password_reset.back_login' | transloco }}</a>
    </div>
  </div>
</section>
